<!DOCTYPE html>
<html lang="en">
    <head>
        <title>API Gateway</title>
        <link rel="stylesheet" href="../../../resources/css/styles.css" />
        <link rel="stylesheet" href="../../../resources/css/highlight.min.css" />
        <script src="../../../resources/js/highlight.min.js"></script>

        <script>
            hljs.initHighlightingOnLoad();
        </script>
        <style>
            code {
                width: 900px;
            }
        </style>
    </head>
    <body>
        <p class="question"><strong>What is API Gateway?</strong></p>
        <p class="answer">
            <ul>
                <li>API Gateway is an important concept in microservices architecture;</li>
                <li>It is a component that acts as an entry point for an application;</li>
                <li>It is also capable of performing authentication, rate limiting, load balancing, and more;</li>
            </ul>
            <ul>
                <li>It is a single point of entry for the clients, which internally maps the incoming requests to a group of microservices;</li>
                <li>Your application could have multiple type of clients; Rather than providing a one-size-fits-all style API, API gateway can expose a different API for each client;</li>
                <li>For eg, Netflix API Gateway
                    <ul>
                        <li>Netflix is a streaming service, with lot of different clients such as: TV, set-top boxes, smartphones, tablets etc;</li>
                        <li>Initially, Netflix attempted to provide a one‑size‑fits‑all API for their streaming service;</li>
                    </ul>
                </li>
                <li>Usually, it is not a good idea to have a single API Gateway aggregating all the internal microservices of your application;</li>
                <li>If it does, it acts as a monolithic aggregator or orchestrator and violates microservice autonomy by coupling all the microservices;</li>
                <li>Therefore, the API Gateways should be segregated based on business boundaries and the client apps and not act as a single aggregator for all the internal microservices;</li>
            </ul>
        </p>

        <p class="question"><strong>Can we directly  expose internal endpoints for clients? How is it a bad idea?</strong></p>
        <p class="answer">
            TODO - https://geekflare.com/api-gateway/
        </p>

        <p class="question"><strong>Amazon API Gateway</strong></p>
        <p class="answer">
            Amazon API Gateway is a fully managed service that is made for developers to form – > publish -> maintain and secure APIs easily at any scale.
             It supports both RESTful and WebSocket APIs and allows us to enables real-time 2-way communication.
        </p>

        <p class="question"><strong>API Gateway vs Load Balancer</strong></p>
        <p class="answer">
            <ul>
                <li>Differences:
                    <ul>
                        <li>API Gateway supports rate limiting, burstling; Application Load Balancer doesn't support it;</li>
                        <li>It is not possible to get a static IP address for the API Gateway endpoint; It is possible to get a static IP address for the Application Load Balancer endpoint;</li>
                        <li>API Gateway accepts only https traffic; Load Balancer accepts both http and https traffic;</li>
                        <li>API Gateway supports request validation, request and response mapping; whereas, Load Balancer doesn't support it;</li>
                        <li>API Gateway can integrate with Lambda in different region, even in another account; whereas, ALB is regional service, it can talk to Lambdas running in that region only;</li>
                        <li>API Gateway supports import/export of API using Swagger; ALB doesn't support import/export of API;</li>
                        <li>API Gateway supports caching, whereas ALB doesn't support caching;</li>
                        <li>API Gateway limits the timeout to 30 seconds, whereas ALB limits it to 4000 seconds;</li>
                        <li>API Gateway integrates with almost all AWS services, whereas ALB doesn't support it;</li>
                        <li>API Gateway doesn't check health checking of backend, whereas ALB supports it;</li>
                        <li>API Gateway is pay per use; If it is free, nothing to pay; But, if you enable caching, you need to pay for caching; whereas, you need to pay for ALB, even if it is idle;</li>
                    </ul>
                </li>
                <li>Similarities:
                    <ul>
                        <li>Both integrate with AWS Web Application Firewall for protection, out-of-the-box;</li>
                        <li>Automatically scales up and down;</li>
                    </ul>
                </li>
            </ul>
        </p>

        <p class="question"><strong>TODO</strong></p>
        <p class="answer">
            Can a distributed system have multiple API gateways?
            If Yes, how the requests are routed b/w API gateways?
            Is it highly available?
        </p>
            

           
                        
        OAG - Oracle API Gateway;
        https://medium.com/oracledevs/introducing-oracle-cloud-api-gateway-the-light-weight-public-or-private-router-to-public-and-50056a45221f
        https://www.youtube.com/watch?v=Ix2RIh5mkM8 - Intro to Oracle's API Gateway
        https://www.youtube.com/watch?v=hES55nIQH0Y - Hands on - how to create an API gateway
        https://www.udemy.com/course/implementing-oracle-api-gateway/ 
        https://www.ateam-oracle.com/post/oci-api-gateway-routes-quickly-and-easily
        
        https://www.alexdebrie.com/posts/api-gateway-elements/
        https://jira.oraclecorp.com/jira/browse/RSYS-104707?src=confmacro
        https://jira.oraclecorp.com/jira/browse/RSYS-102956?src=confmacro
        https://confluence.oraclecorp.com/confluence/display/RES/Responsys+Alpine+Design?src=mail&src.mail.product=confluence-server&src.mail.timestamp=1586426995763&src.mail.notification=com.atlassian.confluence.plugins.confluence-content-notifications-plugin%3Apage-created-notification&src.mail.recipient=18c43a99488458600148888fdb680017&src.mail.action=view

        https://confluence.oraclecorp.com/confluence/display/RES/Alpine+Metrics?src=mail&src.mail.product=confluence-server&src.mail.timestamp=1582627135418&src.mail.notification=com.atlassian.confluence.plugins.confluence-content-notifications-plugin%3Apage-created-notification&src.mail.recipient=18c43a99488458600148888fdb680017&src.mail.action=view
        Deployment automation for OAG(Oracle API Gateway) in OCI

        Zuul is a JVM based router and server side load balancer by Netflix. 
        Just like Zuul, Spring Cloud Gateway provides means for routing requests to different services.



Let's say you have a lambda as a backhand, you can create a cloud watch scheduled rule, which is going to go ping the lambda and see if the responses are coming as expected.


                        let's say you are expecting a field call account number in the input API request, and if it is not there, you can reject it straight away from API Gateway.
                        Similarly, file request response mapping let's say some particular value is coming in off field and then you want to move it to a different field before you send it to back end, you could do that.


                        So API Gateway able to handle spike your traffic so both can auto scale up and scale down.

That's not a problem.

But if the traffic goes up super fast, API Gateway is a little faster to respond.

Because the nature nature of the underlying infrastructure, the default rate is 10000 apps per second,

API platform like Kong., API, MuleSoft, etc. And you want to test out API Gateway.
                       
                        <li>Infrastructure managed by AWS, highly available and elastic;</li>
                   
See the API Gateway that part of my Microservices pattern’s example application. It’s implemented using Spring Cloud Gateway.


The API gateway must use either the Client-side Discovery pattern or Server-side Discovery pattern to route requests to available service instances.
The API Gateway may authenticate the user and pass an Access Token containing information about the user to the services
An API Gateway will use a Circuit Breaker to invoke services
An API gateway often implements the API Composition pattern

        Amazon API Gateway is an AWS service for creating, publishing, maintaining, monitoring, and securing REST, HTTP, and WebSocket APIs at any scale.
    
    
    
        <li>Instead of distributing requests evenly to a set of backend resources, an API Gateway can be configured to direct requests to specific resources based on the endpoints being requested;</li>


        <li>It exposes a unified entry point for a set of internal APIs; </li>
        It allows you to control user access. And it enables security measures, like rate limiting, and applies security policies, like OAuth or JWT. An API gateway is especially important for securing microservices.
    The gateway provides a single endpoint or URL for the client apps and then internally maps the requests to a group of internal microservices;
    The API Gateway offers a reverse proxy to redirect or route requests (layer 7 routing, usually HTTP requests) to the endpoints of the internal microservices;

   

    API gateway that is the single entry point for all clients. 
    The API gateway handles requests in one of two ways. 
    Some requests are simply proxied/routed to the appropriate service. 
    It handles other requests by fanning out to multiple services.
     

    An example of a client might be the frontend of your application in the form of a web page, internal services
     that need to interact with your application, or third-party client websites.
    It acts as a reverse proxy, routing requests from clients to services. 
    It can also provide other cross-cutting features such as authentication, SSL termination, and cache.




  
    So beyond just invoking the program with some input parameter and getting output, there are a lot of
    other factors such as traffic management, load balancing specific input output needs, authentication
    authorization and many more.
    
    If you want to code all these things in your application program, there are a lot of overhead because
    all this interfacing parameters have nothing to do with the business logic that's running your application.
    So coding all this into your program makes it very difficult to modify, test and deploy your code.

    And inversely that a lot of open interfacing standards that you need to implement and implementing all

these with their application code makes it very cumbersome and painful.

That's why you need a separate layer and you move all these interfacing parameters into this layer.

We call this layer our orchestrator as API Gateway API Gateway hosts all your API, takes care of titling

authentication, managing back end and much more.

And IT implementation of API Gateway is Amazon API Gateway.
    
    

    
    </body>
</html>