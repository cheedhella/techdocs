<html>
    <head>
        <title>mxGraph Layers</title>
        <style>
            #graphContainer {
                position: relative;
                overflow: hidden;
                width: 450px;
                height: 250px;
                background: url("images/grid.png");
                cursor: default;
            }
        </style>

        <script type="text/javascript">
            var graph, helloVertex, wolrdVertex, e;
            mxBasePath =
                "/Users/mcheedhe/Data-new/Technical/UI Tech/mxGraph/code";
        </script>
        <!-- Load and initialize the library -->
        <script type="text/javascript" src="lib/mxClient.js"></script>

        <script type="text/javascript">
            function renderGraph(container) {
                if (!mxClient.isBrowserSupported()) {
                    mxUtils.error("Browser is not supported!", 200, false);
                } else {
                    // Creates the graph inside the given container using a model
                    // with a custom root and two layers. Layers can also be added
                    // dynamically using var layer = model.add(root, new mxCell()).
                    var root = new mxCell();
                    var layer0 = root.insert(new mxCell());
                    var layer1 = root.insert(new mxCell());
                    var model = new mxGraphModel(root);
                    var graph = new mxGraph(container, model);

                    // Disables basic selection and cell handling
                    graph.setEnabled(false);

                    // Gets the default parent for inserting new cells. This
                    // is normally the first child of the root (ie. layer 0).
                    var parent = graph.getDefaultParent(); // TODO: Is layer0 and parent are same???

                    // Adds cells to the model in a single step
                    model.beginUpdate();
                    try {
                        var v1 = graph.insertVertex(
                            layer1,
                            null,
                            "Hello,",
                            20,
                            20,
                            80,
                            30,
                            "fillColor=#C0C0C0"
                        );
                        var v2 = graph.insertVertex(
                            layer1,
                            null,
                            "Hello,",
                            200,
                            20,
                            80,
                            30,
                            "fillColor=#C0C0C0"
                        );
                        var v3 = graph.insertVertex(
                            layer0,
                            null,
                            "World!",
                            110,
                            150,
                            80,
                            30
                        );
                        var e1 = graph.insertEdge(
                            layer1,
                            null,
                            "",
                            v1,
                            v3,
                            "strokeColor=#0C0C0C"
                        );
                        e1.geometry.points = [new mxPoint(60, 165)];
                        var e2 = graph.insertEdge(layer0, null, "", v2, v3);
                        e2.geometry.points = [new mxPoint(240, 165)];
                        var e3 = graph.insertEdge(
                            layer0,
                            null,
                            "",
                            v1,
                            v2,
                            "edgeStyle=topToBottomEdgeStyle"
                        );
                        e3.geometry.points = [new mxPoint(150, 30)];
                        var e4 = graph.insertEdge(
                            layer1,
                            null,
                            "",
                            v2,
                            v1,
                            "strokeColor=#0C0C0C;edgeStyle=topToBottomEdgeStyle"
                        );
                        e4.geometry.points = [new mxPoint(150, 40)];
                    } finally {
                        model.endUpdate();
                    }

                    var encoder = new mxCodec();
                    var node = encoder.encode(graph.getModel()); // It will hold graph XML;
                    mxUtils.popup(mxUtils.getPrettyXml(node), true); // Shows XML instantly in a popup

                    document.body.appendChild(
                        mxUtils.button("Layer 0", function () {
                            model.setVisible(layer0, !model.isVisible(layer0));
                        })
                    );

                    document.body.appendChild(
                        mxUtils.button("Layer 1", function () {
                            model.setVisible(layer1, !model.isVisible(layer1));
                        })
                    );
                }
            }
        </script>
    </head>
    <body onload="renderGraph(document.getElementById('graphContainer'))">
        <div id="graphContainer"></div>
    </body>
</html>
