/****************************************************************************
 ** @license
 ** This file is part of yFiles for HTML 2.6.0.2.
 **
 ** yWorks proprietary/confidential. Use is subject to license terms.
 **
 ** Copyright (c) 2023 by yWorks GmbH, Vor dem Kreuzberg 28,
 ** 72070 Tuebingen, Germany. All rights reserved.
 **
 ***************************************************************************/
import y from"./core.js";import l from"./lang.js";import _a_ from"./algorithms.js";import _b_ from"./layout-core.js";import _c_ from"./layout-hierarchic.js";import _d_ from"./router-other.js";_a_.lang=l,_b_.lang=l,_c_.lang=l,_d_.lang=l,function($,f,n,i){"use strict";function t(f){var n=new $.C.GGD,i=n.$FKa;i.$Gha=new $.C.DHD.$b(0,!1),i.$WTa=60,i.$KSa=20;var t=n.$LKa;switch(f.$f7){case-1:t.$Ira=0;break;case 0:t.$Ira=.5;break;case 1:t.$Ira=1}return n}function r($,f,n){for(var i=0,t=0,r=f.$MYa();r.$Si;r.$Bn()){var l=r.$ej;1===n.$Mo(l)?l.$f7>0&&t++:i+=l.$f6}return t<=1&&2===i}function l(f,n,i){var t=n.$Nob($.O.$p56);f.$f16=n.$Xbb(),f.$f17=n.$Xbb(),f.$f3=n.$Xbb(),f.$f4=n.$Xbb(),f.$f12 instanceof $.C.GGD&&0!==f.$f20&&(f.$f=f.$f12.$uBb(n)),function(f,n,i){f.$f5=$.HF.$m14(n.$MU),f.$f1=new $.LE;var t=new $.LE;f.$f11=new $.C.RKB.$a,f.$f2=n.$Ybb(),f.$f15=n.$Ybb(),f.$f6=n.$Ybb(),f.$f9=n.$Ybb(),f.$f8=n.$Ybb(),f.$f19=new $.SE;for(var r=n.$acb();r.$Si;r.$Bn()){var l=new $.C.RKB.$a,u=r.$ej;f.$f2.$pu(u,"n"+u.$MF),1===n.$Nob($.O.$p56).$Mo(u)?o(f,u,l):a(f,u,l);var b=new $.LE;b.$m(l),e(f,l,b);for(var s=0;s<b.$Tb;s++)if((l=b.$Wb(s)).$f1>1){for(var h=new $.LH.$c1("GN"),p=0;p<l.$f1;p++)h.$m2($.PF.$m8(l.$Wb(p).$MF)),h.$m2("/");t.$m(h.toString()),f.$f1.$m(l)}}for(var c=0;c<f.$f1.$Tb;c++){var v=new $.C.JJB(0,0,0,0),B=n.$Oab(),l=f.$f1.$Wb(c);f.$f11.$m6(B);for(var m=0;m<l.$f1;m++){var d=l.$Wb(m);f.$f15.$pu(d,t.$Wb(c)),f.$f9.$pu(d,i),f.$f8.$pu(d,v)}f.$f8.$pu(B,v),f.$f6.$sd(B,!0),f.$f2.$pu(B,t.$Wb(c))}n.$WEb($.O.$p4,f.$f2),n.$WEb($.O.$p36,f.$f15),n.$WEb($.O.$p3,f.$f6),n.$WEb($.O.$p70,f.$f8),n.$WEb($.O.$p26,f.$f9)}(f,n,i);for(var r=n.$Nob($.O.$p1),l=n.$acb();l.$Si;l.$Bn()){var u=l.$ej;if(1===n.$Nob($.O.$p56).$Mo(u)){for(var b=null,s=u.$Nqb(null);s.$Si;s.$Bn()){var h=s.$dj.$f3;if(null===b&&(b=h),n.$aGb(s.$dj,new $.C.SJB.$b(0,n.$m38(s.$dj.$f2).$Bk/2)),n.$cGb(s.$dj,new $.C.SJB.$b(0,-n.$m38(s.$dj.$f3).$Bk/2)),f.$f3.$pu(s.$dj,$.T.ADD.$b(2,!0)),f.$f4.$pu(s.$dj,$.T.ADD.$b(1,!0)),null!==f.$f&&b!==h){var p=null===r?b:r.$Mo(b),c=null===r?h:r.$Mo(h);(4===f.$f20||3===f.$f20)!==(2===t.$Mo(h))?f.$f.$ix(p,c):f.$f.$lx(p,c)}}for(var v=new $.LE,B="CG"+u.$MF,m=u.$Nqb(null);m.$Si;m.$Bn()){var d=m.$dj;f.$f16.$pu(d,B);var w=f.$f15.$Mo(d.$f3);null!==w&&-1!==v.indexOf(w)||(f.$f17.$pu(d,B),null!==w&&v.$m(w))}}}n.$WEb($.O.$p120,f.$f16),n.$WEb($.O.$p121,f.$f17),n.$WEb($.O.$p181,f.$f3),n.$WEb($.O.$p182,f.$f4)}function o(f,n,i){if(1!==n.$f2.$Nob($.O.$p56).$Mo(n))throw $.NG.$m30(w[5]);if(!f.$f5[n.$MF]){i.$m6(n),f.$f5[n.$MF]=!0;for(var t=0,r=n.$Bdb();r.$Si;r.$Bn())if(a(f,r.$ej,i),++t>2)throw $.NG.$m30(w[6])}}function a(f,n,i){if(1===n.$f2.$Nob($.O.$p56).$Mo(n))throw $.NG.$m30(w[7]);if(!f.$f5[n.$MF]){i.$m6(n),f.$f5[n.$MF]=!0;for(var t=n.$rdb();t.$Si;t.$Bn())o(f,t.$ej,i)}}function e(f,n,i){var t=-1,r=-1;for(t=0;t<n.$f1;t++){var l=n.$Wb(t);if(1===l.$f2.$Nob($.O.$p56).$Mo(l)){for(var o=l.$rdb();o.$Si&&!((r=n.indexOf(o.$ej))>-1);o.$Bn());if(r>-1)break}}if(-1!==r){var a=new $.C.RKB.$a,s=n.$Wb(t),h=n.$Wb(r),p=new $.C.RKB.$a;n.$Nh(h),a.$m6(h);for(o=h.$rdb();o.$Si;o.$Bn()){var c=o.$ej;n.$Nh(c),a.$m6(c);for(var v=c.$Bdb();v.$Si;v.$Bn()){var B=v.$ej;B!==h&&(u(f,c,B,s,h)?b(f,c,n,a):p.$m6(c))}}if(n.$NZa()){n.$Vfb(a),p.$Jh(),n.$Nh(h),a.$m6(h);for(o=h.$rdb();o.$Si;o.$Bn()){c=o.$ej;n.$Nh(c),a.$m6(c),p.$m6(c)}}for(o=p.$MYa();o.$Si;o.$Bn())for(var m=o.$ej.$Qob(null);m.$Si;m.$Bn())if(m.$dj.$f2!==h){var d=h.$f2;d.$aGb(m.$dj,new $.C.SJB.$b(0,0)),d.$cGb(m.$dj,new $.C.SJB.$b(0,0)),f.$f3.$pu(m.$dj,$.T.ADD.$b(0,!0)),f.$f4.$pu(m.$dj,$.T.ADD.$b(0,!0)),f.$f19.$m(m.$dj)}e(f,n,i),e(f,a,i),i.$m(a)}}function u(f,n,i,t,r){return function f(n,i,t,r,l,o){if(!$.QE.$m9(o,new $.T.ZED.T(i,t)))return!0;var a=!0;for(var e=t.$rdb();e.$Si;e.$Bn()){var u=e.$ej;if(u!==i){if(u===r)return!1;for(var b=u.$Bdb();b.$Si;b.$Bn()){var s=b.$ej;if(s!==t&&!f(n,u,s,r,l,o)){a=!1;break}}}}return a}(f,n,i,t,r,new $.SE)}function b($,f,n,i){for(var t=f.$Bdb();t.$Si;t.$Bn()){var r=t.$ej;if(!(n.indexOf(r)<0)){n.$Nh(r),i.$m6(r);for(var l=r.$rdb();l.$Si;l.$Bn()){var o=l.$ej;n.indexOf(o)>-1&&(n.$Nh(o),i.$m6(o),b($,o,n,i))}}}}function s($,f,n,i){for(var t=1,r=f.$Bdb();r.$Si;r.$Bn()){var l=r.$ej;if(l!==n&&-1===i.indexOf(l)){i.$m6(l);for(var o=l.$rdb();o.$Si;o.$Bn()){var a=o.$ej;a!==f&&(t+=s($,a,l,i))}}}return t}var h=f.lang.ClassDefinition,p=(f.lang.InterfaceDefinition,f.lang.AttributeDefinition,f.lang.EnumDefinition),c=(f.lang.StructDefinition,f.lang.Abstract,f.lang.module),v=(f.lang.delegate,f.lang.Boolean,f.lang.Number,f.lang.Void,f.lang.Object),B=(f.lang.String,f.lang.decorators.Type),m=f.lang.decorators.SetterArg,d=f.lang.decorators.OptionArgs;f.lang.addMappings("yFiles-for-HTML-Complete-2.6.0.2 (Build 15bc66b5e02f)",{get _$_pyd(){return["alignment","$JX",B("yfiles._R.C.BFD",5)]},_$_qyd:["topLayout","$KX"],_$_suf:["partnerlessBelow","$Gya"],_$_drg:["offsetForFamilyNodes","$vKa"],_$_oah:["familyNodesAlwaysBelow","$pPa"],get _$_ilh(){return["familyMembersSortingPolicy","$RUa",B("yfiles._R.C.CFD",5)]},_$_lmh:["spacingBetweenFamilyMembers","$xVa"],get _$_zoo(){return["FamilyTreeLayout","ZED",d(m("topLayout"),m("spacingBetweenFamilyMembers"),m("offsetForFamilyNodes"),m("partnerlessBelow"),m("familyNodesAlwaysBelow"),m("alignment","yfiles._R.C.BFD"),m("parallelEdgeRouterEnabled"),m("selfLoopRouterEnabled"),m("familyMembersSortingPolicy","yfiles._R.C.CFD"),m("labeling"),m("selfLoopRouter"),m("parallelEdgeRouter"),m("componentLayout"),m("subgraphLayout"),m("hideGroupsStage"),m("orientationLayout"),m("orientationLayoutEnabled"),m("layoutOrientation","yfiles._R.C.FZC"),m("labelingEnabled"),m("hideGroupsStageEnabled"),m("componentLayoutEnabled"),m("subgraphLayoutEnabled"))]},_$_apo:["FamilyType","AFD"],_$_bpo:["VerticalNodeAlignment","BFD"],_$_cpo:["FamilyMembersSortingPolicy","CFD"],_$$_ccb:["yfiles.genealogy","yfiles._R.T","yfiles._R.C"]});var w=["Unknown alignment.","DataProvider "," is not registered to the graph.","FamilyTreeLayout","FamilyTypeDpKey","Direct link between two individuals","Family node has more than two parent nodes","Direct link between two family nodes"];c("_$$_ccb",function($){$._$_cpo=new p(function(){return{NO_SORTING:0,FEMALE_FIRST:1,FEMALE_ALWAYS_FIRST:2,MALE_FIRST:3,MALE_ALWAYS_FIRST:4}})}),c("_$$_ccb",function(n){n._$_zoo=new h(function(){return{$extends:$.C.TBD,constructor:function(){$.C.TBD.call(this),this.$f=null,this.$IPa=!1,this.$QBa.$Xba=12,this.$f12=t(this)},$f16:null,$f17:null,$f3:null,$f4:null,$f19:null,$f9:null,$f2:null,$f15:null,$f6:null,$f8:null,$f21:null,$f22:null,$f12:null,$f24:!0,$f13:30,$f14:10,$f10:!0,$f18:!1,$f7:0,_$_qyd:{get:function(){return this.$f12},set:function($){this.$f12=null===$?t(this):$}},"$m1!":function(){if(!this.$f24||0!==this.$f20)return!1;var f=this.$KX;return $.C.XAD.isInstance(f)&&(f=f.$vl),f instanceof $.C.GGD},_$_lmh:{get:function(){return this.$f13},set:function(f){if(f<0)throw $.NG.$m2();this.$f13=f}},_$_drg:{get:function(){return this.$f14},set:function(f){if(f<0)throw $.NG.$m2();this.$f14=f}},_$_suf:{get:function(){return this.$f10},set:function($){this.$f10=$}},_$_oah:{get:function(){return this.$f18},set:function($){this.$f18=$}},_$_pyd:{get:function(){return this.$f7},set:function(f){var n=0;switch(f){case 1:n=1;break;case 0:n=.5;break;case-1:n=0;break;default:throw $.NG.$m18(w[0])}null!==this.$f12&&this.$f12 instanceof $.C.GGD&&(this.$f12.$LKa.$Ira=n),this.$f7=f}},$fUa:{set:function($){this.$f49=$}},$lNa:{set:function($){this.$f32=$}},$f20:0,$f:null,_$_ilh:{get:function(){return this.$f20},set:function(f){switch(f){case 0:case 1:case 2:case 3:case 4:this.$f20=f;break;default:throw $.NG.$m2()}}},$Hqb:function(f){if(null===f.$Nob($.O.$p56))throw $.NG.$m28(w[1]+$.O.$p56+w[2]);var n=new $.C.JLB(f),i=f.$Nob($.O.$p3),t=f.$Nob($.O.$p36),r=f.$Nob($.O.$p4),o=f.$Nob($.O.$p70),a=new $.C.JLB(f),e=null,u=$.T.KLB.$n(),b=$.T.KLB.$n(),s=$.T.KLB.$n(),h=$.T.KLB.$n(),p=$.T.KLB.$k(),c=null;if(function(f,n){f.$f21=$.T.KLB.$n();var i=n.$Nob($.O.$p56);if(null!==i)for(var t=n.$acb();t.$Si;t.$Bn()){var r=t.$ej;1===i.$Mo(r)&&f.$f21.$vu(r,r.$f7)}}(this,f),function(f,n){f.$f22=$.T.KLB.$n();var i=n.$Nob($.O.$p56);if(null!==i)for(var t=n.$acb();t.$Si;t.$Bn()){var r=t.$ej;1===i.$Mo(r)&&f.$f22.$vu(r,r.$f6)}}(this,f),null!==i){e=f.$Xbb();for(var B=!1,m=f.$Zbb();m.$Si;m.$Bn()){var d=m.$dj;i.$ld(d.$f2)!==i.$ld(d.$f3)?(e.$sd(d,!0),a.$ufb(d),B=!0):e.$sd(d,!1)}B||(f.$Fnb(e),e=null);for(var M=f.$acb();M.$Si;M.$Bn()){var O=M.$ej;i.$ld(O)&&(p.$pu(r.$Mo(O),O),n.$wfb(O),u.$sd(O,!0),b.$pu(O,t.$Mo(O)),s.$pu(O,r.$Mo(O)),h.$pu(O,o.$Mo(O)))}null!==i&&f.$ptb($.O.$p3),null!==t&&f.$ptb($.O.$p36),null!==r&&f.$ptb($.O.$p4),null!==o&&f.$ptb($.O.$p70)}var _=new $.T.ZED.T1(this);if(l(this,f,_),null!==i){var S=new $.C.NLB(f);for(M=f.$acb();M.$Si;M.$Bn()){O=M.$ej;if(S.$qlb(O)){var T=new $.LE;u.$sd(O,!1);for(var j=S.$olb(O).$m4();j.$p;){var C=j.$m(),g=t.$Mo(C);if(null!==g){for(var E=0;E<T.$Tb;E++)if(g===t.$Mo(T.$Wb(E))){g=null;break}null!==g&&T.$m(C)}}if(0===T.$Tb){C=S.$olb(O).$tab();b.$pu(O,t.$Mo(C)),s.$pu(O,r.$Mo(C))}else if(b.$pu(O,t.$Mo(T.$Wb(0))),s.$pu(O,r.$Mo(T.$Wb(0))),T.$Tb>1){for(var y=0;y<T.$Tb;y++)for(var W=p.$Mo(t.$Mo(T.$Wb(y))),F=0;F<T.$Tb;F++){var D=p.$Mo(t.$Mo(T.$Wb(F)));v.equals(r.$Mo(D),t.$Mo(W))&&T.$m3(F)}if(b.$pu(O,t.$Mo(T.$Wb(0))),s.$pu(O,r.$Mo(T.$Wb(0))),1===T.$Tb);else{null===c&&(c=new $.C.RKB.$a);var N=f.$Oab();c.$m6(N),u.$sd(N,!0),s.$pu(N,N);for(E=1;E<T.$Tb;E++)for(var L=T.$Wb(0),R=!1;null!==L;){for(var K=p.$Mo(t.$Mo(L)),k=T.$Wb(E);null!==k;){var x=p.$Mo(t.$Mo(k));if(x===K){if(T.$Wb(0)!==L)for(var G=0;G<E;G++)T.$Zb(G,L);T.$Zb(E,k),R=!0;break}k=x}if(R)break;for(G=0;G<E;G++)T.$Zb(G,L);L=K}for(E=0;E<T.$Tb;E++)b.$pu(T.$Wb(E),N);b.$pu(N,t.$Mo(T.$Wb(0))),n.$wfb(N)}}}else u.$sd(O,!1),b.$pu(O,t.$Mo(O)),s.$pu(O,r.$Mo(O))}S.$ZZa()}var A=new $.T.ZED.T2(this,this.$KX),Z=new $.T.ZED.T4(n,i,u,b,s,h,A),Y=new $.C.QBD;Y.$vl=Z;var J=new $.C.KAD(Y,null);J.$Cra=this.$m1();try{new $.T.ZED.T3(this,J,_,A).$Kp(f)}finally{!function(f,n){null!==f.$f16&&(n.$ptb($.O.$p120),n.$Fnb(f.$f16),f.$f16=null),null!==f.$f17&&(n.$ptb($.O.$p121),n.$Fnb(f.$f17),f.$f17=null),null!==f.$f3&&(n.$ptb($.O.$p181),n.$Fnb(f.$f3),f.$f3=null),null!==f.$f4&&(n.$ptb($.O.$p182),n.$Fnb(f.$f4),f.$f4=null),null!==f.$f8&&(n.$ptb($.O.$p70),n.$Gnb(f.$f8),f.$f8=null),null!==f.$f9&&(n.$ptb($.O.$p26),n.$Gnb(f.$f9),f.$f9=null),null!==f.$f2&&(n.$ptb($.O.$p4),n.$Gnb(f.$f2),f.$f2=null),null!==f.$f15&&(n.$ptb($.O.$p36),n.$Gnb(f.$f15),f.$f15=null),null!==f.$f6&&(n.$ptb($.O.$p3),n.$Gnb(f.$f6),f.$f6=null),null!==f.$f&&(f.$f.$Zn(),f.$f=null),f.$f19=null}(this,f),null!==i&&f.$WEb($.O.$p3,i),null!==t&&f.$WEb($.O.$p36,t),null!==r&&f.$WEb($.O.$p4,r),null!==o&&f.$WEb($.O.$p70,o)}if(n.$xab(),null!==c){for(E=0;E<c.$f1;E++)f.$djb(c.$Wb(E));c=null}if(a.$xab(),null!==this.$f1)for(E=0;E<this.$f1.$Tb;E++)f.$djb(this.$f11.$Wb(E));if(null!==e){f.$WEb($.O.$p102,e);var I=new $.C.GLD;I.$FFa=$.O.$p102;try{I.$Kp(f)}finally{f.$ptb($.O.$p102),f.$Fnb(e)}}},$f5:null,$f1:null,$f11:null,$static:{FAMILY_TYPE_DP_KEY:null,T2:new h(function(){return{$extends:$.C.RBD,$final:!0,constructor:function(f,n){$.C.RBD.call(this,n),this.$f=f,this.$f1=$.T.KLB.$l()},$f1:null,"$m!":function($){return this.$f1.$Mo($)},"$Kp!":function($){if(this.$vl.$Kp($),this.$f.$m1())for(var f=$.$acb();f.$Si;f.$Bn())for(var n=f.$ej.$Qob(null);n.$Si;n.$Bn()){var i=n.$dj;this.$f1.$pu(i,$.$itb(i))}},$f:null}}),T3:new h(function(){return{$extends:$.C.RBD,$final:!0,constructor:function(f,n,i,t){$.C.RBD.call(this,n),this.$f=f,this.$f2=i,this.$f1=t},$f2:null,$f1:null,"$Kp!":function(f){if(this.$f.$m1()){var n=new $.C.NLB(f),i=$.T.KLB.$n();!function(f,n,i,t){for(var l=i.$Nob($.O.$p56),o=f.$f.$f11.$MYa();o.$Si;o.$Bn()){var a=o.$ej,e=n.$olb(a);if(r(0,e,l)){t.$sd(a,!0);for(var u=e.$MYa();u.$Si;u.$Bn()){var b=u.$ej;if(1!==l.$Mo(b))for(var s=b.$Qob(null);s.$Si;s.$Bn())f.$f.$f4.$pu(s.$dj,null)}}}}(this,n,f,i),this.$vl.$Kp(f),function(f,n,i,t,r){for(var l=n.$Nob($.O.$p56),o=f.$f.$f11.$MYa();o.$Si;o.$Bn()){var a=o.$ej;if(t.$ld(a)){for(var e=i.$olb(a),u=null,b=null,s=e.$MYa();s.$Si;s.$Bn()){var h=s.$ej;1!==l.$Mo(h)&&h.$f6>0&&(null===u?u=h:b=h)}if(null!==u&&null!==b){var p=n.$Fjb(u),c=n.$Fjb(b),v=r.$m(u.$f11).$f,B=r.$m(b.$f11).$f;if(p>c&&v<B||p<c&&v>B){var m=n.$Gob(a);for(s=e.$MYa();s.$Si;s.$Bn()){h=s.$ej;var d=m.$f+m.$f3-(n.$Fjb(h)-m.$f);n.$kIb(h,d,n.$Gjb(h))}}}}}}(this,f,n,i,this.$f1),function(f,n,i,t){for(var r=n.$Nob($.O.$p56),l=f.$f.$f11.$MYa();l.$Si;l.$Bn()){var o=l.$ej;if(t.$ld(o))for(var a=i.$olb(o).$MYa();a.$Si;a.$Bn()){var e=a.$ej;if(1!==r.$Mo(e))for(var u=e.$Qob(null);u.$Si;u.$Bn()){var b=u.$dj;n.$cGb(b,new $.C.SJB.$b(0,-n.$m38(e).$Bk/2)),f.$f.$f4.$pu(b,$.T.ADD.$b(1,!0))}}}}(this,f,n,i),f.$WEb($.O.$p70,this.$f.$f8);var t=this.$f1.$vl;t.$Kba=0,this.$f2.$f1=!0,this.$vl.$Kp(f),t.$Kba=1,this.$f2.$f1=!1,f.$ptb($.O.$p163),n.$ZZa()}else this.$vl.$Kp(f)},$f:null}}),T4:new h(function(){return{$extends:$.C.RBD,$final:!0,constructor:function(f,n,i,t,r,l,o){$.C.RBD.call(this,o),this.$f=f,this.$f1=n,this.$f2=i,this.$f5=t,this.$f4=r,this.$f3=l},"$Kp!":function(f){var n=new $.C.RKB.$b(this.$f.$wdb());this.$f.$xab(),null!==this.$f1&&(f.$WEb($.O.$p3,this.$f2),f.$WEb($.O.$p36,this.$f5),f.$WEb($.O.$p4,this.$f4),f.$WEb($.O.$p70,this.$f3)),this.$LZb(f),this.$f.$xfb(n),f.$ptb($.O.$p3),f.$ptb($.O.$p36),f.$ptb($.O.$p4),f.$ptb($.O.$p70)},$f:null,$f1:null,$f2:null,$f5:null,$f4:null,$f3:null}}),T:new h(function(){return{$final:!0,constructor:function($,f){this.$f1=$,this.$f=f},$f1:null,$f:null,"equals!":function($){if(this===$)return!0;if(null===$||f.lang.getType(this)!==f.lang.getType($))return!1;var n=$;return this.$f===n.$f&&this.$f1===n.$f1},"hashCode!":function(){var $=this.$f1.hashCode();return $=31*$+this.$f.hashCode()}}}),T1:new h(function(){return{$final:!0,$with:[$.C.VAD],constructor:function(f){this.$f=f,this.$f1=!1,this.$f3=$.T.KLB.$n(),this.$f2=new $.T.ZED.T1.T(this,this.$f3,this.$f.$f21)},$f1:!1,$f2:null,$f3:null,"$Kp!":function(f){if(1!==f.$MU){if(2===f.$MU&&this.$f.$f10&&this.$f.$f22.$So(f.$LU)<2&&this.$f.$f22.$So(f.$aR)<2){for(var n=null,i=null,t=f.$acb();t.$Si;t.$Bn()){var r=t.$ej;1!==f.$Nob($.O.$p56).$Mo(r)?n=r:i=r}if(null!==n&&null!==i){var l=f.$m38(n),o=f.$m38(i);l.$Bv(-l.$fk/2,0),o.$Bv(-o.$fk/2,l.$Bk+this.$f.$f14);for(var a=i.$Qob(null);a.$Si;a.$Bn()){var e=a.$dj;($$=f.$m37(e)).$no(),$$.$Ol=new $.C.SJB.$b(0,0),$$.$Pl=new $.C.SJB.$b(0,0)}var u=this.$f.$f8.$Mo(n),b=new $.C.JJB(u.top,u.left,-this.$f.$f14-f.$m38(i).$Bk,u.right);return void this.$f.$f8.$pu(n,b)}}var h=new $.C.RKB.$a;if(this.$f1)h.$Ufb(f.$acb()),h.$yfb(new $.T.ZED.T1.T1(this,f));else{var p=new $.C.RKB.$a,c=new $.C.RKB.$a;for(t=f.$acb();t.$Si;t.$Bn()){r=t.$ej;1!==f.$Nob($.O.$p56).$Mo(r)?p.$m6(r):c.$m6(r)}for(var v=null,B=0,m=0;m<p.$f1;m++){(Q=p.$Wb(m)).$rdb().$cj>B&&(B=Q.$rdb().$cj,v=Q)}p.$Nh(v),h.$m6(v),function f(n,i,t,r,l){for(var o=new $.C.RKB.$a,a=l.$rdb();a.$Si;a.$Bn()){var e=a.$ej;if(t.$Nh(e)){var u=s(n,e,l,new $.C.RKB.$d(l));n.$f3.$vu(e,u),o.$m6(e)}}o.$yfb(n.$f2);var b=l.$f2.$Nob($.O.$p56),h=!1;if(1===o.$f1&&r.indexOf(l)===r.$f1-1&&(h=!0),2===n.$f.$f20||4===n.$f.$f20)for(var p=0;p<o.$f1;p++)4===n.$f.$f20===(2===b.$Mo(l))?r.$m6(o.$Wb(p)):r.$Rh(0,o.$Wb(p));else if(0!==n.$f.$f20&&1===r.$f1&&1===o.$f1)3===n.$f.$f20===(2===b.$Mo(l))?r.$m6(o.$Wb(0)):r.$Rh(0,o.$Wb(0));else{var c=r.indexOf(l),v=r.indexOf(l)+1;for(p=0;p<o.$f1;p++)p%2!==0||h?r.$Rh(v,o.$Wb(p)):r.$Rh(c,o.$Wb(p)),v++}var B=new $.C.RKB.$a;for(p=0;p<o.$f1;p++){for(var m=!1,d=null,w=(e=o.$Wb(p)).$Bdb();w.$Si;w.$Bn())if((d=w.$ej)!==l){m=!0;break}if(i.$Nh(d)){B.$m6(d);var M=r.indexOf(e);r.indexOf(l)>M?r.$Rh(r.indexOf(e),d):r.$Rh(r.indexOf(e)+1,d)}else if(m){var O=0;for(r.$Nh(e),w=e.$Bdb();w.$Si;w.$Bn())O=Math.max(r.indexOf(w.$ej),O);r.$Rh(O,e)}}o=null;for(p=0;p<B.$f1;p++)f(n,i,t,r,B.$Wb(p))}(this,p,c,h,v)}var d=new $.C.RKB.$a,w=new $.C.RKB.$a,M=new $.LE,O=0,_=0,S=Number.MAX_VALUE;for(m=0;m<h.$f1;m++){r=h.$Wb(m);var T=f.$m38(r);1===f.$Nob($.O.$p56).$Mo(r)?(d.$m6(r),M.$m(m),T.$Bv(O+Math.max((this.$f.$f13-T.$fk)/2,T.$fk/4),-T.$Bk/2),O=O+Math.max(1.5*T.$fk,this.$f.$f13)|0):(w.$m6(r),S=Math.min(T.$Bk,S),_=Math.max(T.$Bk,_),T.$Bv(O,-T.$Bk/2),O=O+T.$fk|0)}if(0!==this.$f.$f7)for(m=0;m<w.$f1;m++){T=f.$m38(w.$Wb(m));1===this.$f.$f7?T.$Bv(T.$Qi,-(T.$Bk-S/2)):T.$Bv(T.$Qi,-S/2)}var j=$.HF.$m11(h.$f1),C=-2;for(m=0;m<d.$f1;m++){var g=d.$Wb(m),E=!1,y=$.ZE.$m8(M.$Wb(m));if(this.$f.$f18||C===y-1&&0===j[C])E=!0;else for(var W=g.$Bdb();W.$Si;W.$Bn()){var F=W.$ej,D=h.indexOf(F)-y;if(Math.abs(D)>2){E=!0;break}}if(E)j[y]=1;else{var N=new $.C.SJB.$b(0,0);for(a=g.$Qob(null);a.$Si;a.$Bn()){e=a.$dj;if(($$=f.$m37(e)).$no(),0===this.$f.$f7)$$.$Ol=N;else{T=f.$m38(e.$f2);f.$ZFb(e,new $.C.SJB.$b(T.$Qi+T.$fk/2,0))}$$.$Pl=N}d.$m9(m),M.$m3(m),m--}C=y}var L,R=_/2;1===this.$f.$f7?R=S/2:-1===this.$f.$f7&&(R=_-S/2),L=R;for(m=0;m<d.$f1;m++){g=d.$Wb(m);for(var K=$.ZE.$m8(M.$Wb(m)),k=0,x=g.$Bdb();x.$Si;x.$Bn()){for(var G=h.indexOf(x.$ej),A=Math.min(K,G),Z=Math.max(K,G),Y=0,J=A;J<=Z;J++)Y+=j[J];k=Math.max(Y,k)}T=f.$m38(g);var I=R+this.$f.$f14+(T.$Bk+this.$f.$f14)*(k-1);T.$Bv(T.$Qi,I),L=Math.max(L,I+T.$Bk)}for(var P=0;P<w.$f1;P++){var Q=w.$Wb(P),X=h.indexOf(Q),q=0,U=new $.C.VIB.$a;for(a=Q.$Nqb(null);a.$Si;a.$Bn()){e=a.$dj;j[h.indexOf(e.$f3)]>0&&(U.$m6(e),q++)}if(q>0){var H=f.$m38(Q).$fk/(q+1),V=$.HF.$m11(U.$f1),z=$.HF.$m11(U.$f1);for(m=0;m<U.$f1;m++){V[m]=h.indexOf(U.$Wb(m).$f3)-X,V[m]>0&&(V[m]-=2*h.$f1),z[m]=H;for(J=0;J<m;J++)V[m]>V[J]?z[J]+=H:z[m]+=H}for(m=0;m<U.$f1;m++){var $$;e=U.$Wb(m);($$=f.$m37(e)).$no(),$$.$Pl=new $.C.SJB.$b(0,0);var f$=f.$m38(Q),n$=f.$m38(e.$f3),i$=this.$f.$f19.$fc(e)?f$.$fk/2:z[m],t$=n$.$Ri+n$.$Bk/2;$$.$Ol=new $.C.SJB.$b(i$-f$.$fk/2,0),$$.$Ru(f$.$Qi+i$,t$)}}}var r$=(u=this.$f.$f8.$Mo(w.$Wb(0))).top,l$=u.bottom;null!==u&&0===this.$f.$f7?r$=L-R:null!==u&&1===this.$f.$f7&&(l$=R-L),this.$f.$f8.$pu(w.$Wb(0),new $.C.JJB(r$,u.left,l$,u.right))}},$f:null,$static:{T:new h(function(){return{$final:!0,$with:[$.C.EMB],constructor:function($,f,n){this.$f1=$,this.$f=f,this.$f2=n},$f:null,$f2:null,"$Sh!":function(f,n){var i=$.T.ELB.$m(this.$f.$So(f),this.$f.$So(n));return 0!==i?i:$.T.ELB.$m(this.$f2.$So(f),this.$f2.$So(n))},$f1:null}}),T1:new h(function(){return{$final:!0,$with:[$.C.EMB],constructor:function($,f){this.$f1=$,this.$f=f},$f:null,"$Sh!":function(f,n){return $.T.ELB.$i(this.$f.$Fjb(f),this.$f.$Fjb(n))},$f1:null}})}}}),$clinit:function(){$.T.ZED.FAMILY_TYPE_DP_KEY=$.O.$m1($.C.AFD.$class,$.C.ZED.$class,w[3],w[4])}}}})}),c("_$$_ccb",function($){$._$_apo=new p(function(){return{FAMILY:1,MALE:2,FEMALE:3}})}),c("_$$_ccb",function($){$._$_bpo=new p(function(){return{TOP:-1,CENTER:0,BOTTOM:1}})})}(y.lang.module("yfiles._R"),y,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self);export default y;